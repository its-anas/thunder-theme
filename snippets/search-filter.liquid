{% style %}
  .filter-group__summary {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem;
    border-bottom: 1px solid #fff;
  }

  summary {
    cursor: pointer;
    list-style: none;
  }

  details svg {
    transition: all 0.3s ease;
  }

  details[open] svg {
    transform: rotate(180deg);
  }

  .filter-label {
    display: flex;
    flex-direction: row;
    gap: 0.5rem;
  }

  .filter-active-filters__remove {
    padding: 0.5rem;
    background: #222;
  }

  .filter-active-filters__clear {
    align-self: center;
  }

  .filter-active-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .filter-group__list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .filter-group__list-item {
  }

  .filter-group__list-item label {
    display: flex;
    align-items: end;
    gap: 0.5rem;
  }

  .filter-group__price-range__inputs {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }

  .filter-group__price-range__from-input {
    position: relative;
    padding: 0.5rem;
    border: 1px solid white;
    width: 100%;
  }

  .filter-group__price-range__from-input input {
    width: 100%;
  }

  .filter-group__price-range__from-input div::-webkit-input-placeholder {
    display: ;
  }

  .filter-group__price-range__from-input input {
    height: auto;
    padding: 0rem;
    border: 0px;
    background-color: transparent;
    text-align: right;
    color: #fff;
    font-size: var(--font-size);
    font-family: var(--font-family);
  }

  .filter-group__price-range__currency-symbol {
    position: absolute;
  }

  input::-webkit-inner-spin-button {
    display: none;
  }

  .filter-group__container {
    padding: 1rem;
  }

  .filter-group__price-range__separator {
    margin-left: 1rem;
    margin-right: 1rem;
  }

  .filter-group__price-range__slider {
    position: relative;
    height: 3px;
    width: 100%;
    background: #555;
    outline: none;
    margin: 1rem 0rem;
  }

  .filter-group__price-range__slider .progress {
    height: 100%;
    left: var(--filter-price-range-min);
    right: var(--filter-price-range-max);
    background: #fff;
    position: absolute;
  }

  .filter-group__price-range__slider input {
    background: none;
    -webkit-appearance: none;
    margin: 0px;
    padding: 0px;
    border: none;
    width: 100%;
    height: 3px;
    position: absolute;
    pointer-events: none;
  }

  .filter-group__price-range__slider input::-webkit-slider-thumb {
    pointer-events: auto;
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    background: #fff;
  }

  .color-filter-group__list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
  }

  .color-filter-group__list-item label input {
    width: 35px;
    height: 35px;
  }

  .color-filter-group__list-item label input:checked {
    background-image: none !important;

  }
{% endstyle %}

<form class="filter">
  <input type="hidden" name="q comment
   elsif images[color_swatch_value] != blank
  assign color_swatch_image = images[color_swatch_value] | img_url: '72x72'
  assign color_swatch_style = 'background-image: url(' | append: color_swatch_image | append: ')'
endcomment value="{{ search.terms }}">

  <div class="filter-active-filters">
    {%- for filter in search.filters -%}
      {%- if filter.type == 'price_range' -%}
        {%- if filter.min_value.value != null or filter.max_value.value != null -%}
          <a class="filter-active-filters__remove small" href="{{ filter.url_to_remove }}">
            {%- assign min_value = filter.min_value.value | default: 0 -%}
            {%- assign max_value = filter.max_value.value | default: filter.range_max -%}
            {{ min_value | money }} - {{ max_value | money }} X
          </a>
        {%- endif -%}
      {%- else -%}
        {%- for filter_value in filter.active_values -%}
          <a class="filter-active-filters__remove small" href="{{ filter_value.url_to_remove }}">
            {{ filter_value.label }} X
          </a>
        {%- endfor -%}
      {% endif %}
    {%- endfor -%}
    <a
      href="{{ routes.search_url }}?sort_by={{ search.sort_by }}&q={{ search.terms }}"
      class="filter-active-filters__clear small underline"
      >Clear all</a
    >
  </div>

  {%- for filter in search.filters -%}
    <details class="filter-group" open>
      <summary class="filter-group__summary">
        <div class="filter-label">
          <p>{{ filter.label }}</p>

          {%- if filter.active_values.size > 0 -%}
            <p>({{ filter.active_values.size }})</p>
          {%- endif -%}
        </div>
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 10.5L12 15.5L17 10.5" stroke="white" stroke-width="1.5"/>
        </svg>
      </summary>

      <div class="filter-group__container">
        {% comment %}
           <div class="filter-group__header">
            {%- if filter.active_values.size > 0 -%}
              <a href="{{ filter.url_to_remove }}" class="filter-group__header-reset">Reset</a>f
            {%- endif -%}
          </div>
        {% endcomment %}

        {%- case filter.type -%}
          {%- when 'boolean', 'list' -%}
            {% if filter.label == 'Color' %}
              <div class="color-filter-group__list">
                {%- for filter_value in filter.values -%}
                  <div class="color-filter-group__list-item">
                    <label
                      for="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                    >
                      <input
                        type="checkbox"
                        name="{{ filter_value.param_name }}"
                        value="{{ filter_value.value }}"
                        id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                        {% if filter_value.active -%}
                          checked
                        {%- endif %}
                        {% if filter_value.count == 0 and filter_value.active == false -%}
                          disabled
                        {%- endif %}
                        style="{% render 'color_swatch', actual_color: filter_value.value %}"
                      >
                    </label>
                  </div>
                {%- endfor -%}
              </div>
            {% else %}
              <div class="filter-group__list">
                {%- for filter_value in filter.values -%}
                  <div class="filter-group__list-item">
                    <label for="Filter-{{ filter.param_name }}-{{ forloop.index }}">
                      <input
                        type="checkbox"
                        name="{{ filter_value.param_name }}"
                        value="{{ filter_value.value }}"
                        id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                        {% if filter_value.active -%}
                          checked
                        {%- endif %}
                        {% if filter_value.count == 0 and filter_value.active == false -%}
                          disabled
                        {%- endif %}
                      >
                      {{ filter_value.label }} ({{ filter_value.count }})
                    </label>
                  </div>
                {%- endfor -%}
              </div>

              <div class="filter-group__submit">
                <input type="submit" value="Apply" hidden>
              </div>
            {% endif %}
          {%- when 'price_range' -%}
            <price-range class="filter-group__price-range">
              <div
                class="filter-group__price-range__slider"
                style="--filter-price-range-min:0%; --filter-price-range-max: 0%;"
              >
                <div class="progress"></div>
                <input
                  type="range"
                  aria-label="From price"
                  class="range"
                  min="0"
                  max="{{ filter.range_max | divided_by: 100 }}"
                  value="0"
                >
                <input
                  type="range"
                  aria-label="To price"
                  class="range"
                  min="0"
                  max="{{ filter.range_max | divided_by: 100 }}"
                  value="{{ filter.range_max | divided_by: 100 }}"
                >
              </div>

              <div class="filter-group__price-range__inputs">
                <div class="filter-group__price-range__from-input">
                  <span class="filter-group__price-range__currency-symbol">{{ cart.currency.symbol }}</span>

                  <input
                    name="{{ filter.min_value.param_name }}"
                    id="Filter-{{ filter.min_value.param_name }}"
                    {% if filter.min_value.value -%}
                      value="{{ filter.min_value.value | divided_by: 100 }}"
                    {%- endif %}
                    type="number"
                    placeholder="0"
                    min="0"
                    max="{{ filter.range_max | divided_by: 100 }}"
                  >
                </div>
                <span class="filter-group__price-range__separator">to</span>
                <div class="filter-group__price-range__from-input">
                  <span class="filter-group__price-range__currency-symbol">{{ cart.currency.symbol }}</span>

                  <input
                    name="{{ filter.max_value.param_name }}"
                    id="Filter-{{ filter.max_value.param_name }}"
                    {% if filter.max_value.value -%}
                      value="{{ filter.max_value.value | divided_by: 100  }}"
                    {%- endif %}
                    type="number"
                    placeholder="{{ filter.range_max | divided_by: 100 }}"
                    min="0"
                    max="{{ filter.range_max  | divided_by: 100  }}"
                  >
                </div>
              </div>
            </price-range>

            <div class="filter-group__submit">
              <input type="submit" value="Apply" hidden>
            </div>
        {%- endcase -%}
      </div>
    </details>
  {%- endfor -%}
</form>
